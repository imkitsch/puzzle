# puzzle-希望能一次性解决信息收集问题的工具

## 免责声明
+ 本工具仅面向合法授权的企业安全建设行为与个人学习行为，如您需要测试本工具的可用性，请自行搭建靶机环境。
+ 在使用本工具进行检测时，您应确保该行为符合当地的法律法规，并且已经取得了足够的授权。请勿对非授权目标进行扫描。

如果发现上述禁止行为，我们将保留追究您法律责任的权利。

如您在使用本工具的过程中存在任何非法行为，您需自行承担相应后果，我们将不承担任何法律及连带责任。

在安装并使用本工具前，请您务必审慎阅读、充分理解各条款内容。

除非您已充分阅读、完全理解并接受本协议所有条款，否则，请您不要安装并使用本工具。您的使用行为或者您以其他任何明示或者默示方式表示接受本协议的，即视为您已阅读并同意本协议的约束。

## 简介
puzzle是纯go开发的信息收集工具，涵盖了子域名扫描、ip扫描、web指纹扫描，并使其流程化。开发过程中参考(~~抄袭~~)了许多现有扫描器，若发现相似代码，不是巧合。

## 安装
+ 从Releases中下载(不推荐)
+ 拉取最新源码自行编译，编译后的文件要同config文件夹在同级目录下(推荐)

编译命令:
```shell
cd cmd/puzzle
go build -ldflags "-s -w"
mv puzzle ../..
```

## 使用
```text
        ██████╗ ██╗   ██╗███████╗███████╗██╗     ███████╗
        ██╔══██╗██║   ██║╚══███╔╝╚══███╔╝██║     ██╔════╝
        ██████╔╝██║   ██║  ███╔╝   ███╔╝ ██║     █████╗
        ██╔═══╝ ██║   ██║ ███╔╝   ███╔╝  ██║     ██╔══╝
        ██║     ╚██████╔╝███████╗███████╗███████╗███████╗
        ╚═╝      ╚═════╝ ╚══════╝╚══════╝╚══════╝╚══════╝
  -d string
        从单独域名中读取扫描
  -dl string
        从文件中读取扫描域名
  -i string
        ip输入,仅支持单次输入如192.168.1.1 or 192.168.1.1/24
  -ipl string
        从文件中获取ip
  -l3
        是否爆破三级域名，默认为false
  -m string
        选择模式,现有all,domain,ip,默认为all模式 (default "all")
  -o string
        输出文件名,如result
  -p string
        端口号,如1-65535,22,3306,默认为top1000
  -ping
        是否开启ping探测,默认为false
  -proxy string
        web扫描代理,如socks5://127.0.0.1:8080
  -pt int
        端口爆破线程,默认500 (default 500)
  -serial
    	是否开启连续ip段检测
  -timeout int
        web指纹扫描超时数,默认10 (default 10)
  -update
        更新qqwrt库和指纹库
  -wt int
        web指纹爆破线程,默认25 (default 25)
```
启动必须参数为`-m`和`-o`，指定扫描模式和输出文件

本工具本着一次性解决的原则，建议使用all模式，all模式只需从`-d`或`-dl`输入，工具会识别ip和域名，并分别进行子域名爆破和ip扫描，并从子域名中过滤cdn获取真实ip再次扫描

domain模式和ip模式为all模式的拆解版

example:
```shell
./puzzle -m all -d example.com -o example

./puzzle -m all -dl file.txt -o example
```

使用注意事项:
+ linux环境下请在root权限下使用，否则无法调用网卡
+ 输出文件不允许覆盖
+ windows需要安装npcap,linux需要安装libpcap
+ 在复杂网络环境下无法获取网卡信息时，创建并配置/config/subfinder/device.yaml

## TodoList
+ 爆破模块(不一定会加，外网爆破实在太扯淡)
+ 页面js中的api和ak收集
+ 与漏扫的联动
